# ENTERPRISE BOT - Driscoll Fork
# All smart features OFF - dumb chatbot mode
# Memory pipeline dormant but available for future Pro tier

# =============================================================================
# DEPLOYMENT
# =============================================================================
deployment:
  mode: enterprise
  tier: basic              # basic = dumb, pro = memory, full = everything

# =============================================================================
# TENANT (Driscoll is first customer)
# =============================================================================
tenant:
  id: driscoll
  name: "Driscoll Foods"
  allowed_domains:
    - driscollfoods.com
    # NOTE: Add testing domains in .env or local config, not here
  docs_root: ./manuals/Driscoll
  default_division: warehouse

# =============================================================================
# FEATURE FLAGS - THE MASTER SWITCHES
# =============================================================================
features:
  # ENTERPRISE RAG - Vector search over process manuals
  enterprise_rag:
    enabled: true
    threshold: 0.6           # Return EVERYTHING above this score
    # NOTE: No top_k - threshold-only retrieval by design

  # SQUIRREL - Session continuity (last hour awareness)
  # Gives Grok personality - "bro you asked that 5 times already"
  squirrel:
    enabled: true
    window_minutes: 60       # How far back to look
    max_exchanges: 10        # Cap for context size

  # MEMORY PIPELINES - INTENTIONALLY OMITTED
  # If not in config, EnterpriseTwin won't try to load it
  # Add this back for Pro tier:
  # memory_pipeline:
  #   enabled: true
  #   batch_interval: 5.0
  #   max_batch_size: 10

  # COGNITIVE FEATURES (ALL OFF for enterprise)
  metacognitive_mirror: false
  cognitive_profiler: false
  evolution_engine: false
  reasoning_traces: false
  chat_import: false

  # UI FEATURES
  ui:
    swarm_loop: false
    memory_space_3d: false
    chat_basic: true
    dark_mode: true
    analytics_dashboard: false

# =============================================================================
# MODEL
# =============================================================================
model:
  provider: xai
  name: grok-4-1-fast-reasoning
  max_tokens: 8192
  temperature: 0.5              # Lower = more consistent
  context_window: 2000000

# =============================================================================
# DOCUMENT STUFFING
# =============================================================================
docs:
  docs_dir: ./manuals/Driscoll
  max_tokens_per_request: 200000
  include_shared: true

  stuffing:
    enabled: true
    max_tokens_per_division: 200000

# =============================================================================
# VOICE (Professional, not Venom)
# =============================================================================
voice:
  engine: venom                 # venom | enterprise
  style: corporate              # corporate | helpful | troll
  company_name: "Driscoll Foods"
  sign_off: false               # No "- Your AI Assistant" stuff
  default: corporate

  templates:
    corporate:
      personality: professional
      snark_level: 0

    troll:
      personality: sarcastic
      snark_level: 7

  division_voice:
    sales: corporate
    transportation: troll
    operations: corporate
    default: corporate

# =============================================================================
# PATHS
# =============================================================================
paths:
  data_dir: ./data              # Will be empty (no memories yet)
  manuals_root: ./manuals

# =============================================================================
# RETRIEVAL (only when memory_pipelines: true - dormant)
# =============================================================================
retrieval:
  process_top_k: 10
  episodic_top_k: 5
  session_top_k: 5
  min_score: 0.3

# =============================================================================
# MEMORY PIPELINE (dormant - available for pro tier)
# =============================================================================
memory_pipeline:
  batch_interval: 5.0
  max_batch_size: 10

# =============================================================================
# MEMORY BACKEND (Phase 5)
# =============================================================================
memory:
  backend: file                 # "file" or "postgres"

  # PostgreSQL configuration (only needed if backend = "postgres")
  postgres:
    host: localhost
    port: 5432
    database: enterprise_bot
    user: postgres
    password: ${POSTGRES_PASSWORD}  # Use env var for secrets

# =============================================================================
# LOGGING
# =============================================================================
logging:
  level: INFO
  format: "%(asctime)s [%(levelname)s] %(name)s: %(message)s"
